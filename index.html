<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Concise Handlebars.js</title>
    <!-- 0a. CSS -->
    <link rel='stylesheet' href='./css/bootstrap.min.css'><!-- main.css -->
    <link rel="stylesheet" href="style.css">
 
    <!-- 0a. JS -->
    <!-- <script src="//code.jquery.com/jquery-2.0.3.min.js"></script><!-- online jquery.js -->
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.min.js"></script><!-- online handlebars.js-->
    <script src="js/jquery-2.0.3.min.js"></script><!-- online jquery.js -->
    <script src="js/handlebars.min.js"></script>
    <script rel='script' src='./js/howler.js'></script>
    <!-- Twiter CSS -->
    <!-- howler or html5 audio -->
  </head>
  <style>
  </style>
 
  <body>
    <!--1. Data (json format!) -->
    <script>
    var url='data.json'; // relative url : 'data.json'; protocole-relative absolute url: '//website.org/path/to/data.json';
    var jsonData = {"item": [{ "latin":"Glaucidium cuculoides", "name":"Asian_barred_owlet", "key":"1", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Eurystomus orientalis", "name":"Asian_dollarbird", "key":"", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Irena puella", "name":"Asian_fairy_bluebird", "key":"", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Threskiornis melanocephalus", "name":"Black-headed_ibis", "key":"2", "ecosystem":"River"},
{ "latin":"Oriolus xanthornus", "name":"Black-hooded_oriole", "key":"3", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Dinopium benghalense", "name":"Black-rumped_flameback", "key":"4", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Amauornis bicolour", "name":"Black-tailed_crake", "key":"5", "ecosystem":"River"},
{ "latin":"Limosa limosa", "name":"Black-tailed_godwit", "key":"", "ecosystem":"River"},
{ "latin":"Megalaima asiatica", "name":"Blue-throated_barbet", "key":"6", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Cissa chinensis", "name":"Common_green_magpie", "key":"7", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Alcedo althis", "name":"Common_kingfisher", "key":"8", "ecosystem":"River"},
{ "latin":"Mergus merganser", "name":"Common_merganser", "key":"9", "ecosystem":"River"},
{ "latin":"Ceryle lugubris", "name":"Crested_kingfisher", "key":"0", "ecosystem":"River"},
{ "latin":"Spilornis cheela", "name":"Crested_serpent_eagle", "key":"-", "ecosystem":"Sky"},
{ "latin":"Surniculus lugubris", "name":"Cuckoo_drongo", "key":"q", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Phalacrocorax carbo", "name":"Great_cormorant", "key":"w", "ecosystem":"River"},
{ "latin":"Mulleripicus pulverulentus", "name":"Great_slaty_woodpecker", "key":"e", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Polyplectron bicalcaratum", "name":"Grey_peacock-pheasant", "key":"r", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Motacilla cinerea", "name":"Grey_wagtail", "key":"t", "ecosystem":"River"},
{ "latin":"Gracula religiosa", "name":"Myna_hill", "key":"a", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Pycnonotus leucogenys", "name":"Himalayan_bulbul", "key":"y", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Ibidorhyncha struthersii", "name":"Ibisbill", "key":"u", "ecosystem":"River"},
{ "latin":"Lophura leucomelana lathami", "name":"Kalij_pheasant", "key":"i", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Leptoptilos javanicus", "name":"Lesser_adjutant", "key":"o", "ecosystem":"River"},
{ "latin":"Pericrocotus ethologus", "name":"Long-tailed_minivet", "key":"p", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Anhinga melanogaster", "name":"Oriental_darter", "key":"s", "ecosystem":"River"},
{ "latin":"Streptopelia orientalis", "name":"Oriental_turtle_dove", "key":"", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Haliaeetus leucoryphus", "name":"Pallas", "key":"", "ecosystem":"Sky"},
{ "latin":"Ceryle rudis", "name":"Pied_kingfisher", "key":"d", "ecosystem":"River"},
{ "latin":"Rhyacornis fuliginosa", "name":"Plumbeous_water_redstart", "key":"f", "ecosystem":"River"},
{ "latin":"Gallus gallus", "name":"Red_junglefowl", "key":"h", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Psittacula alexandri", "name":"Red-breasted_parakeet", "key":"g", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Vanellus indicus", "name":"Red-wattled_lapwing", "key":"j", "ecosystem":"River"},
{ "latin":"Vanellus duvaucelii", "name":"River_lapwing", "key":"k", "ecosystem":"River"},
{ "latin":"Sterna aurantia", "name":"River_tern_bhadra", "key":"l", "ecosystem":"River"},
{ "latin":"Anthreptes singalensis", "name":"Ruby-cheeked_sunbird", "key":"z", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Leiothrix argentauris", "name":"Silver-eared_mesia", "key":"", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Enicurus schistaceus", "name":"Slaty-backed_forktail", "key":"x", "ecosystem":"River"},
{ "latin":"Dicrurus bracteatus", "name":"Spangled_drongo", "key":"c", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Streptopelia chinensis", "name":"Spotted_dove", "key":"v", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Arachnothera magna", "name":"Streaked_spiderhunter", "key":"b", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Treron sphenurus", "name":"Wedge-tailed_green_pigeon", "key":"n", "ecosystem":"Mid-storey_or_capony"},
{ "latin":"Arborophiila atrogularis", "name":"White-cheeked_partridge", "key":"m", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Garrulax leucolophus", "name":"White-crested_laughingthrush", "key":"", "ecosystem":"Ground_dwelling_or_understorey"},
{ "latin":"Gyps bengalensis", "name":"", "key":"", "ecosystem":"Sky"},
{ "latin":"Halcyon smyrnensis", "name":"White-throated_kingfisher", "key":"", "ecosystem":"River"},
{ "latin":"Carina scutulata", "name":"", "key":"", "ecosystem":"River"},
{ "latin":"", "name":"White-naped_vulture", "key":"", "ecosystem":"Sky"}
]};

    </script>
<div class="container">
<div class="row">
  <div class="col-md-6">
    1. Put cursor into form field.<br />
    2. It's ready to work !<br />
    3. Test the <b>Interactive Bird Voices Panel</b> (IBVP) by pressing a touch with your hand
  </div>
  <div class="col-md-6">
    <form>
      <fieldset>
        <label for="target">Put mouse's </label>
        <input id="input" placeholder=" cursor here !" type="text">
      </fieldset>
    </form>
  </div>
</div>
 
    <!-- 2. Anchor -->
<div class="row" id="anchor">This div is the <b>#anchor</b>.<br /></div>
 
    <!-- 3. Template -->
    <script id="tpl" type="text/template">
        {{#item}}
            <button class="tpl bird sound {{ecosystem}} col-md-2 col-xs-4" data-key="{{key}}" data-name="{{name}}" style='background-image:url("./img/{{name}}.jpg");background-size: 100% 100%;'>
              <!-- <img src="img/{{name}}.jpg" /><br /> -->
                  {{#if key}} <a href="./audio/{{name}}.mp3">{{key}}</a> — {{/if}}
                  {{name}}
                  {{#if latin}} (<a href="http://en.wikipedia.org/wiki/{{latin}}">{{latin}}</a>){{/if}}.
              <audio src="./audio/{{name}}.mp3"></audio>
            </button>
        {{/item}}
    </script>
 
    <!--4. Handlebars.js slingshot -->
    <script>
    //4a.function creation
    var slingshot = function (data, tplId, anchor) {
     //$.getJSON(url, function(data) {
              var template = $(tplId).html();
              var stone = Handlebars.compile(template)(data);
              $(anchor).append(stone);
    // });
  }
    //4b.function firing
    slingshot(jsonData, '#tpl', '#anchor'); // since url = 'data.json' , we can use both notations. 
    </script>


<!--4. Handlebars.js slingshot -->
    <script>

// 5a. INTERACTIONS
var playSound = function ($this) {
                                                    console.log("♪+1");// edited
  // get phonetic properties
    var pho = $this.attr("data-name");
    var key = $this.attr("data-key");
  $this.addClass("playing");
  // playing
  var sound = new Howl({
     //                                               console.log("♪+2");// edited
      urls: ['./audio/'+pho+'.mp3'],
      onend: function() { $this.removeClass("playing"); }
  }).play();
  console.log("♪+; pho: "+pho+"; name: "+ key);// edited
}; // end


$(document).ready(function() {
  $(".sound").click(function(){ 
    playSound( $(this) );
  });

  $("#input").on("keyup", function () {
    var input = $("#input").val().slice(-1);
    playSound( $(".bird[data-key="+input+"]") );
    $("#input").val(""); // clean up field!
  });
}); 


    </script>
  </body>
</html>